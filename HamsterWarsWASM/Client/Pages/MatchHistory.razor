@page "/history"
@inject IMatchService MatchService


@if (MatchService.Matches == null || MatchService.Matches.Count == 0)
{
    <span>Loading all matches...</span>
}
else
{
    <ListMatchComponent Matches="@MatchService.Matches" Context="match">
        <TableHeader>
            <th>ID</th>
            <th>Winner</th>
            <th>Loser</th>
        </TableHeader>
        <RowTemplate>
            <td>@match.Id</td>
            <td>@match.WinnerId</td>
            <td>@match.LoserId</td>
            <td type="button" class="btn btn-danger float-start" @onclick="@(() => DeleteMatch(@match))">
                Delete Match
            </td>
        </RowTemplate>
    </ListMatchComponent>
}

@code {
    protected override async Task OnInitializedAsync()
    {
        await MatchService.GetMatches();
    }

    async void DeleteMatch(Match match)
    {
        await MatchService.DeleteMatch(match);
    }
}
