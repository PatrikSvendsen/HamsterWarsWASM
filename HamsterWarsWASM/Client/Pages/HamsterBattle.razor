@page "/battle"
@inject IHamsterService HamsterService

<h3>Hamster Battle</h3>


<ul class="list-unstyled">
    @foreach (var hamster in HamsterService.Hamsters)
    {
        if (hamster.Deleted == false)
        {
            <li class="media my-3">
                <div class="media-img-wrapper mr-2">
                    <a href="/matchwinners/@hamster.Id">@hamster.Name</a>
                </div>
                <div class="btn btn-danger">Like</div>
            </li>
        }
    }
</ul>


@code {
    protected override Task OnAfterRenderAsync(bool firstRender)
    {
        return base.OnAfterRenderAsync(firstRender);
    }

    private static readonly Random rnd = new Random();

    void ShuffleHamsters()
    {
        int n = HamsterService.Hamsters.Count();
        var list = HamsterService.Hamsters.ToList();

        // Plockat från Stackoverflow/google --https://blog.codinghorror.com/shuffling/
        while (n > 1)
        {
            int k = (rnd.Next(0, n) % n);
            n--;
            Hamster value = list[k];
            list[k] = list[n];
            list[n] = value;
        }

        list.Where(x => x.Deleted == false)
        .Take(2)
        .ToList();
    }

}
